<div md-content flex md-scroll-y>
  <div layout="column" layout-gt-md="row" class="inset">
    <div flex-gt-md="70">
      <md-card>
        <md-card-title>{{intakeTask?.referenceNo}}</md-card-title>
        <md-card-subtitle>{{intakeTask?.descriptionEn}}</md-card-subtitle>

        <div layout="row" layout-wrap hide-xs hide-sm class="push-sm">
          <div layout="column" flex>
            <md-list dense>
              <md-list-item>
                <md-icon md-list-icon>local_offer</md-icon>
                <h4 md-line>{{intakeTask?.referenceNo}}</h4>
                <p md-line>Reference No</p>
              </md-list-item>
              <md-list-item>
                <md-icon md-list-icon>local_offer</md-icon>
                <h4 md-line>{{intakeTask?.projection}}</h4>
                <p md-line>Projection</p>
              </md-list-item>
            </md-list>
          </div>
          <div layout="column" flex>
            <md-list dense>
              <md-list-item a>
                <md-icon md-list-icon>local_offer</md-icon>
                <h4 md-line>{{intakeTask?.startDate| date :'longDate'}}</h4>
                <p md-line>Start Date</p>
              </md-list-item>
              <md-list-item>
                <md-icon md-list-icon>local_offer</md-icon>
                <h4 md-line>{{intakeTask?.endDate | date :'longDate'}}</h4>
                <p md-line>End Date</p>
              </md-list-item>
            </md-list>
          </div>
          <div layout="column" flex>
            <md-list dense>
              <md-list-item a>
                <md-icon md-list-icon>local_offer</md-icon>
                <h4 md-line>{{intakeTask?.intake.programLevel.code}}</h4>
                <p md-line>Program Level</p>
              </md-list-item>
              <md-list-item>
                <md-icon md-list-icon>local_offer</md-icon>
                <h4 md-line>{{intakeTask?.intake.intakeSession.code}}</h4>
                <p md-line>Intake Session</p>
              </md-list-item>
            </md-list>
          </div>
        </div>

        <md-card-actions>
        </md-card-actions>
      </md-card>

      <md-card>
        <md-card-title>Applications</md-card-title>
        <md-divider></md-divider>
        <md-tab-group>
          <md-tab label="Pending Evaluated ({{(intakeSubmittedApplications$ | async)?.length}})">  
        	<pams-intake-application-submitted-list
          	[intake]="intakeTask.intake"
        	[intakeSubmittedApplications]="intakeSubmittedApplications$ | async"></pams-intake-application-submitted-list>
          </md-tab>
          <md-tab label="Evaluated ({{(intakeSelectedApplications$ | async)?.length}})">
            <pams-intake-application-selected-list
          	[intake]="intakeTask.intake"
        	[intakeSelectedApplications]="intakeSelectedApplications$ | async"></pams-intake-application-selected-list>
          </md-tab>
          <md-tab label="Rejected ({{(intakeRejectedApplications$ | async)?.length}})">
            <pams-intake-application-rejected-list
          	[intake]="intakeTask.intake"
        	[intakeRejectedApplications]="intakeRejectedApplications$ | async"></pams-intake-application-rejected-list>
          </md-tab>
          <md-tab label="Pending Verification ({{(intakeVerifiedApplications$ | async)?.length}})">
            <pams-intake-application-verified-list
          	[intake]="intakeTask.intake"
        	[intakeVerifiedApplications]="intakeVerifiedApplications$ | async"></pams-intake-application-verified-list>
          </md-tab>
        </md-tab-group>
      </md-card>

      <md-card>
        <md-card-title>Offerings</md-card-title>
        <md-card-subtitle>Offered programs, modes and supervisors</md-card-subtitle>
        <md-divider></md-divider>
        <md-tab-group>
          <md-tab label="Programs ({{(programOfferings$ | async)?.length}})">
            <pams-program-offering-list
              [programOfferings]="programOfferings$|async"
              [intake]="intakeTask.intake"></pams-program-offering-list>
          </md-tab>
          <md-tab label="Study Modes ({{(studyModeOfferings$ | async)?.length}})">
            <pams-study-mode-offering-list
              [studyModeOfferings]="studyModeOfferings$|async"
              [intake]="intakeTask.intake"></pams-study-mode-offering-list>
          </md-tab>
          <md-tab label="Supervisors ({{(supervisorOfferings$ | async)?.length}})">
            <pams-supervisor-offering-list
              [supervisorOfferings]="supervisorOfferings$|async"
              [intake]="intakeTask.intake"></pams-supervisor-offering-list>
          </md-tab>
        </md-tab-group>
      </md-card>

    </div>
    <div flex-gt-md="30">
      <pams-intake-task-status [intakeTask]="intakeTask"></pams-intake-task-status>

      <md-card>
        <md-card-title>Action</md-card-title>
        <md-card-subtitle>Actions available on current intake</md-card-subtitle>
        <md-divider></md-divider>
        <md-nav-list dense>
        <div *ngIf="(intakeSubmittedApplications$ | async)?.length <= 0 && (intakeVerifiedApplications$ | async)?.length <= 0">
          <md-list-item (click)="process()">
            <md-icon md-list-avatar>done</md-icon>
            <h4 md-line>Process</h4>
            <p md-line>Process this intake</p>
          </md-list-item>
		</div>
          <md-list-item (click)="copy()">
            <md-icon md-list-avatar>content_copy</md-icon>
            <h4 md-line>Copy</h4>
            <p md-line>Copy intake</p>
          </md-list-item>
          <md-list-item>
            <md-icon md-list-avatar>remove_circle</md-icon>
            <h4 md-line>Remove</h4>
            <p md-line>Remove this intake</p>
          </md-list-item>
        </md-nav-list>
      </md-card>
    </div>
  </div>
</div>
