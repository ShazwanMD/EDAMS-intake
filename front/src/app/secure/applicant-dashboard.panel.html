<td-layout-card-over>
  <div layout="row" layout-align="start center">
    <div>
      <md-card-title>PAMS UMK</md-card-title>
      <md-card-subtitle>Postgraduate Management System</md-card-subtitle>
    </div>
  </div>
  <md-divider></md-divider>

  <md-card class="">
    <md-tab-group [selectedIndex]="0">

      <md-tab label="My Account">
        <md-nav-list>
          <pams-applicant
            [applicant]="applicant$ | async">
          </pams-applicant>
        </md-nav-list>
      </md-tab>


      <md-tab label="My Applications">
        <div layout="row" layout-wrap hide-xs hide-sm class="push-sm">
          <div *ngIf="(intakeApplications$ | async)?.length === 0"><span>You have not applied yet. Please take a look at open intakes</span></div>
          <template let-application let-last="last" ngFor [ngForOf]="intakeApplications$ | async ">
            <div flex-md="50" flex-gt-md="33" layout="column">
              <md-card href class="md-card-colored" flex>
                <md-card-header>
                  <img md-card-avatar src="https://source.unsplash.com/random/200x200">
                  <md-card-title> INTAKE {{application.intake.startDate | date:'y'}}</md-card-title>
                  <md-card-subtitle> {{application.intake.graduateCenter.code}} {{application.intake.programLevel.code}}
                  </md-card-subtitle>
                </md-card-header>
                <img md-card-image src="https://source.unsplash.com/random/800x600">
                <md-card-content>
                  <div layout="row" layout-padding>
                    <p>{{application.bidStatus}}</p>
                    <span flex></span>
                    <button *ngIf="application.bidStatus === 'DRAFTED'"
                            [routerLink]="['/secure/application/intake-application/', application.intake?.graduateCenter?.code.toLowerCase(), application.referenceNo]"
                            md-button color="primary">Edit
                    </button>
                    <button *ngIf="application.bidStatus === 'SUBMITTED'"
                            [routerLink]="['/secure/application/intake-application/']" md-button
                            color="primary">Result
                    </button>
                  </div>
                </md-card-content>
              </md-card>
            </div>
          </template>
        </div>
      </md-tab>

      <md-tab label="Open Intakes">
        <div layout="row" layout-wrap hide-xs hide-sm class="push-sm">
          <div *ngIf="(publishedIntakes$ | async)?.length === 0"><span>There is no open intake at the moment. Please check again later</span></div>
          <template let-intake let-last="last" ngFor [ngForOf]="publishedIntakes$ | async ">
            <div flex-md="50" flex-gt-md="33" layout="column">
              <md-card href class="md-card-colored" flex>
                <md-card-title> INTAKE {{intake.startDate | date:'y'}}</md-card-title>
                <md-card-subtitle> {{intake.graduateCenter.code}} {{intake.programLevel.code}}</md-card-subtitle>
                <img md-card-image src="https://source.unsplash.com/random/800x600">
                <md-card-content>
                  <div fxLayout="row" fxLayoutAlign="space-around center">
                    <span flex></span>
                    <div>
                      <small class="bb"> From:</small>
                      {{intake.startDate | date:'EEEE d MMMM'}}
                      <span flex></span>
                    </div>
                    <div>
                      <small class="bb"> To:</small>
                      {{intake.endDate | date:'EEEE d MMMM'}}
                    </div>
                    <div>
                      <button *ngIf="intake.flowState === 'PUBLISHED'" [routerLink]="['/secure/applicant/application/intake-detail/', intake.referenceNo]" md-button
                              color="primary">Apply Now!
                      </button>
                    </div>
                  </div>
                </md-card-content>
              </md-card>
            </div>
          </template>
        </div>
      </md-tab>
    </md-tab-group>

    <md-divider></md-divider>
    <md-card-actions>
    </md-card-actions>
  </md-card>

  <md-nav-list>
    <a md-list-item [routerLink]="['/']" authorizedShow="{}">
      <h3 md-line> My Account </h3>
      <p md-line> Profile </p>
    </a>
    <md-divider *ngIf="!last" md-inset></md-divider>
  </md-nav-list>
  <md-divider></md-divider>
  <md-card-actions>
    <a href="http://www.umk.edu.my" target="_blank" md-button color="primary">Contact CCI-UMK</a>
  </md-card-actions>
  <div td-after-card></div>
</td-layout-card-over>
