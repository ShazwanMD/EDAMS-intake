<td-layout-nav>
  <div toolbar-content layout="row" layout-align="center center" flex>
    <span>PAMS: Postgraduate Management System</span>
    <span flex></span>
  </div>

  <td-layout-card-over>
    <form [formGroup]="applicationForm" ng-submit="submitForm(applicationForm.$valid)" novalidate>
      <div layout="row" layout-align="start center">
        <div>
          <md-card-title>Intake Application</md-card-title>
          <md-card-subtitle>Intake Registration for Session 201720181</md-card-subtitle>
        </div>
      </div>
      <md-divider></md-divider>
      <md-tab-group (selectChange)="onTabChange($event)" md-stretch-tabs>
        <md-tab>
          <template md-tab-label>Detail Of Candidate</template>
          <td-expansion-panel label="Program Choices">
            <pams-study-center-choice [intakeApplication]="intakeApplication$ | async">
            </pams-study-center-choice>

            <!--<div fxLayout fxLayout.xs="column" fxLayoutWrap fxLayoutGap="25px">
              <pams-study-center-code-select [placeholder]="'Study Center'" [innerFormControl]="applicationForm.controls.studyCenterCode"
                fxFlex="calc(70%-25px)" class="push-bottom">
              </pams-study-center-code-select>
            </div>-->
          </td-expansion-panel>


          <template md-tab-label>Personal Information</template>
          <td-expansion-panel label="Personal Details">
            <div layout="row" class="inset" layout-wrap hide-xs hide-sm class="push-sm">
              <!-- first column -->
            <div layout="column" class="pad-right" flex>

              <div layout="row" class="pad-bottom" flex>
              <md-input-container flex>
              <input mdInput placeholder="Name" formControlName="name"/>
              </md-input-container>
              <!--<div class="error" class="tc-red-600" *ngIf="applicationForm.get('name').invalid && applicationForm.get('name').touched">
                    Name should be at least {{minLength}} characters!
              </div>-->
              </div>

              <div layout="row" class="pad-bottom" flex>
              <md-input-container flex>
              <input mdInput placeholder="Email" formControlName="email"/>
              </md-input-container>
              <!--<div class="error" *ngIf="applicationForm.get('email').invalid && applicationForm.get('email').touched" class="help-block">
                    email is required!
              </div>-->
              </div>

              <div layout="row" class="pad-bottom" flex>
              <md-input-container flex>
              <input mdInput placeholder="NRIC/Passport" formControlName="credentialNo"/>
              </md-input-container>
              <div class="error" class="tc-red-600" *ngIf="applicationForm.get('credentialNo').invalid && applicationForm.get('credentialNo').touched">
                    Your Ic or Passport Number is required!
              </div>
              </div>

              <div layout="row" class="pad-bottom" flex>
              <md-input-container flex>
              <input mdInput type="date" placeholder="Date of Birth" formControlName="birthDate"/>
              </md-input-container>
              <div class="error" class="tc-red-600" *ngIf="applicationForm.get('birthDate').invalid && applicationForm.get('birthDate').touched">
                    Your Birth Date is required!
              </div>
              </div>

              <div layout="row" class="pad-top">
              <pams-nationality-code-select [placeholder]="'Nationality'" [innerFormControl]="applicationForm.controls.nationalityCode">
              </pams-nationality-code-select>
              <div class="error" class="tc-red-600" *ngIf="applicationForm.get('birthDate').invalid && applicationForm.get('birthDate').touched">
                    Please add your nationality!
              </div>
              </div>


              <div layout="row" class="pad-top">
              <pams-race-code-select [placeholder]="'Race'" [innerFormControl]="applicationForm.controls.raceCode">
              </pams-race-code-select>
              </div>

              <div layout="row" class="pad-top">
              <pams-marital-code-select [placeholder]="'Marital'" [innerFormControl]="applicationForm.controls.maritalCode">
              </pams-marital-code-select>
              </div>

            </div>

              <!-- second column -->
            <div layout="column" class="pad-right" flex>

              <div layout="row" class="pad-bottom" flex>
              <md-input-container flex>
              <input mdInput type="date" placeholder="Passport Expired Date" formControlName="passExpDate" flex/>
              </md-input-container>
              </div>

              <div layout="row" class="pad-bottom" flex>
              <md-input-container flex>
              <input mdInput placeholder="Phone No" formControlName="mobile"/>
              </md-input-container>
              <div class="error" class="tc-red-600" *ngIf="applicationForm.get('mobile').invalid && applicationForm.get('mobile').touched">
                Please add your Phone number!
              </div>
              </div>

              <div layout="row" class="pad-bottom" flex>
                <md-input-container flex>
                <input mdInput placeholder="Office No" formControlName="phone" flex/>
                </md-input-container>
              </div>

              <div layout="row" class="pad-bottom" flex>
                <md-input-container flex>
                <input mdInput placeholder="Fax No" formControlName="fax" flex/>
                </md-input-container>
              </div>

              <div layout="row" class="pad-top">
              <pams-ethnicity-code-select [placeholder]="'Ethnicity'" required md-maxlength="10" [innerFormControl]="applicationForm.controls.ethnicityCode">
              </pams-ethnicity-code-select>
              </div>

              <div layout="row" class="pad-top">
                <pams-gender-code-select [placeholder]="'Gender'" [innerFormControl]="applicationForm.controls.genderCode">
                </pams-gender-code-select>
              </div>

              <div layout="row" class="pad-top">
                <pams-religion-code-select [placeholder]="'Religion'" [innerFormControl]="applicationForm.controls.religionCode">
                </pams-religion-code-select>
              </div>

            </div>

          </div>
          </td-expansion-panel>
        </md-tab>

        <md-tab>
          <template md-tab-label>Address Information</template>
          <td-expansion-panel label="Address Detail">
            <div layout="row" class="inset" layout-wrap hide-xs hide-sm class="push-sm">
              <div layout="column" class="pad-right" flex>

                Mailing Address

              <div layout="row" class="pad-bottom" flex>
                <md-input-container flex>
                <input mdInput placeholder="Address 1" formControlName="mailingAddress1"/>
                </md-input-container>
                <div class="error" class="tc-red-600" *ngIf="applicationForm.get('mobile').invalid && applicationForm.get('mobile').touched">
                   Please add address!
                </div>
              </div>

              <div layout="row" class="pad-bottom" required>
                <md-input-container flex>
                <input mdInput placeholder="Address 2" formControlName="mailingAddress2" flex/>
                </md-input-container>
              </div>

              <div layout="row" class="pad-bottom" flex>
                <md-input-container flex>
                <input mdInput placeholder="Address 3" formControlName="mailingAddress3" flex/>
                </md-input-container>
              </div>

              <div layout="row" class="pad-bottom" flex>
                <md-input-container flex>
                <input mdInput placeholder="Postcode" formControlName="mailingPostcode"/>
                </md-input-container>
                <div class="error" class="tc-red-600" *ngIf="applicationForm.get('mailingPostcode').invalid && applicationForm.get('mailingPostcode').touched">
                 Please add Postcode Number!
                </div>
              </div>

              <div layout="row" class="pad-top">
                <pams-state-code-select [placeholder]="'State'" [innerFormControl]="applicationForm.controls.mailingStateCode">
                </pams-state-code-select>
                <div class="error" class="tc-red-600" *ngIf="applicationForm.get('mailingStateCode').invalid && applicationForm.get('mailingStateCode').touched">
                 Please add State!
                </div>
              </div>

                <div layout="column" class="pad-right" flex>

                  <div layout="row" class="pad-right" flex>
                  <pams-country-code-select [placeholder]="'Country'" [innerFormControl]="applicationForm.controls.mailingCountryCode">
                  </pams-country-code-select>
                  <div class="error" class="tc-red-600" *ngIf="applicationForm.get('mailingCountryCode').invalid && applicationForm.get('mailingCountryCode').touched">
                   Country is required!
                  </div>
                  </div>

                </div>
              </div>
            </div>


            <div layout="row" class="inset" layout-wrap hide-xs hide-sm class="push-sm">
              <div layout="column" class="pad-right" flex>

                Official Address

                <div layout="row" class="pad-bottom" flex>
                <md-input-container flex>
                <input mdInput placeholder="Address 1" formControlName="officialAddress1" flex/>
                </md-input-container>
                </div>

                <div layout="row" class="pad-bottom" flex>
                <md-input-container flex>
                <input mdInput placeholder="Address 2" formControlName="officialAddress2" flex/>
                </md-input-container>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-input-container flex>
                    <input mdInput placeholder="Address 3" formControlName="officialAddress3" flex/>
                  </md-input-container>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-input-container flex>
                    <input mdInput placeholder="Postcode" formControlName="officialPostcode" flex/>
                  </md-input-container>
                </div>

                <div layout="row" class="pad-top">
                  <pams-state-code-select [placeholder]="'State'" [innerFormControl]="applicationForm.controls.officialStateCode">
                  </pams-state-code-select>
                </div>

                <div layout="column" class="pad-right" flex>

                  <div layout="row" class="pad-top" flex>
                    <pams-country-code-select [placeholder]="'Country'" [innerFormControl]="applicationForm.controls.officialCountryCode">
                    </pams-country-code-select>
                  </div>
                </div>
              </div>
            </div>
          </td-expansion-panel>
        </md-tab>

        <md-tab>
          <md-card>
            <template md-tab-label>Working Experience</template>
            <td-expansion-panel label="Working Experience">
              <pams-employment-list [intakeApplication]="intakeApplication$ | async" [employments]="employments$ | async"></pams-employment-list>
            </td-expansion-panel>
          </md-card>
        </md-tab>

        <md-tab>
          <md-card>
            <template md-tab-label>Academic Qualification</template>
            <md-card-subtitle>Kindly attached all related documents with Certified True Copy</md-card-subtitle>
            <md-card-subtitle>* Foreign applicant need to submit TOEFL/IELTS result together with the application form
            </md-card-subtitle>

            <td-expansion-panel label="Results">
              <pams-result-list [intakeApplication]="intakeApplication$ | async" [results]="results$ | async">
              </pams-result-list>
            </td-expansion-panel>

            <td-expansion-panel label="Proficiency in Malay/English Language">
              <pams-language-list [intakeApplication]="intakeApplication$ | async" [languages]="languages$ | async">
              </pams-language-list>

            </td-expansion-panel>

          </md-card>
        </md-tab>

        <md-tab>
          <md-card>
            <template md-tab-label>Upload Document</template>
            <div layout="column" class="pad-right" flex>

               <td-expansion-panel label="Attachments">
                <pams-attachment-list [intakeApplication]="intakeApplication$ | async" [attachments]="attachments$ | async">
                </pams-attachment-list>
              </td-expansion-panel>

              <td-expansion-panel label="Attachments Document Checklist">
                <md-card-subtitle>Please check all the uploaded attachments below</md-card-subtitle>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="processingFeeAttached" aria-label="Processing fees Receipt" >
                  <div layout="column" flex> Processing fees Receipt</div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="languageResultAttached" >
                  <div layout="column" flex> Language Result </div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="toeflResultAttached">
                    <div layout="row" flex>TOEFL (Foreign Only)</div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="ieltsResultAttached">
                    <div layout="row" flex> IELTS Result (Foreign Only)</div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="spmResultAttached">
                    <div layout="column" flex>Spm Result</div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="stpmResultAttached">
                    <div layout="column" flex>Stpm Result</div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="diplomaResultAttached">
                    <div layout="column" flex> Diploma Result </div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="bachelorResultAttached">
                    <div layout="column" flex>Bachelor Result</div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="sponsorLetterAttached">
                    <div layout="column" flex> Letter From Sponsor </div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="bankStatementAttached">
                    <div layout="column" flex>Bank Statement</div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  <md-checkbox ng-model="isChecked" formControlName="refereeFormAttached">
                    <div layout="column" flex> Referee Form</div>
                  </md-checkbox>
                </div>

                <div layout="row" class="pad-bottom" flex>
                  
                  <md-checkbox ng-model="isChecked" formControlName="researchProposalAttached">
                    <div layout="column" flex> Research Proposal </div>
                  </md-checkbox>
                </div>
              </td-expansion-panel>

            
            </div>
          </md-card>
        </md-tab>

        <md-tab>
          <template md-tab-label>Submit Application</template>
          <div flex class="pad inset" tdMediaToggle="gt-xs" [mediaClasses]="['pad-sm']">
            <div class="push-top-sm"></div>
            <md-card-title>Declaration</md-card-title>
            <md-card-subtitle>Submit Application for Intake September 2017</md-card-subtitle>
            <div layout="row" layout-wrap hide-xs hide-sm class="push-sm">
              <md-checkbox ng-model="isChecked" formControlName="declared">
                <div layout="column" flex>
                  I declare that the statements made in this application form are correct. I am fully aware that UMK reserves the right to
                  reject my application or terminate my candidature if the information given above is incorrect or incomplete.
                </div>
                <div class="error" class="tc-red-600" *ngIf="applicationForm.get('declared').invalid && applicationForm.get('declared').touched">
                   Please click Declaration before submit the application!
                  </div>
              </md-checkbox>
              
            </div>
            <div layout="row" layout-align="start center">
              <button md-raised-button color="accent" (click)="submit(applicationForm.value, applicationForm.valid)"  [disabled] = "!applicationForm.valid">
                Submit
              </button>
             
            </div>

           
            
            
          </div>
          <div class="push-top-sm"></div>
        </md-tab>
      </md-tab-group>
    </form>
  </td-layout-card-over>
</td-layout-nav>